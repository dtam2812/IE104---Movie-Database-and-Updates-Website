<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UIT FILM</title>

    <!-- CSS -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../../style/HeaderAndFooter.css" />
    <link rel="stylesheet" href="../../style/TvShowDetail.css" />
    <link rel="stylesheet" href="../../style/MovieCard.css" />
    <link rel="stylesheet" href="../../Style/Trailer.css" />
    <link rel="stylesheet" href="../../Style/CastCard.css" />
    <link rel="stylesheet" href="../../Services/reset.css" />
    <link rel="stylesheet" href="../../Style/SearchBar.css" />
    <link rel="stylesheet" href="../../Services/reset.css" />
  </head>

  <body>
    <!-- start-header -->
    <div id="header"></div>

    <script type="module">
      import { headerjs } from "../../js/Header.js";
      import { searchBar } from "../../js/SearchBar.js";

      fetch("../components/Header.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("header").innerHTML = html;
          headerjs();
          return fetch("../components/SearchBar.html");
        })
        .then((res) => res.text())
        .then((searchHTML) => {
          document.querySelector(".search-box").innerHTML = searchHTML;
          searchBar();
        })
        .catch((error) => console.error("Fetch header/search failed:", error));
    </script>
    <!-- end-header -->

    <!-- start-movie-content-banner -->
    <section class="movie-detail">
      <div class="movie-detail-container">
        <div class="top-detail-wrap">
          <div class="background-fade"></div>
          <div class="movie-content">
            <div class="movie-content-left">
              <img
                alt=""
                loading="lazy"
                src="https://static.nutscdn.com/vimg/300-0/ef826a2c732ac7c76a322f004111e18d.webp"
              />
            </div>

            <div class="movie-content-right">
              <div class="movie-content-title">
                <h3>Steve</h3>
              </div>

              <div class="movie-content-review">
                <div class="movie-content-score">
                  <p>IMDb <span>6.6</span></p>
                </div>
                <div class="movie-content-age">
                  <span><strong>T18</strong></span>
                </div>
              </div>

              <div class="movie-content-type">
                <span>Chính kịch</span>
                <span>Hài</span>
                <span>Chuyển thể</span>
              </div>

              <div class="movie-content-action">
                <a id="trailer-btn" class="play-btn" href="#">
                  <i class="fa-solid fa-play"></i>
                  <span><strong>Trailer</strong></span>
                </a>
                <a class="like-btn" href="#">
                  <i class="fa-solid fa-heart"></i>
                </a>
              </div>

              <div class="movie-content-overview">
                <span>Giới thiệu:</span><br />
                Trong một ngày căng thẳng, vị hiệu trưởng tận tâm của một trường
                cải tạo cơ hội cuối nỗ lực đưa các học sinh của mình vào khuôn
                khổ trong khi đối mặt với áp lực riêng.
              </div>

              <div class="movie-content-director">
                <p><span>Đạo diễn:</span> Tim Mielants, Daire Glynn</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- end-movie-content-banner -->

    <section class="movie-intro">
      <!-- Thanh Tabs -->
      <div class="movie-tabs">
        <button class="tab active" data-tab="actors">Diễn viên</button>
        <button class="tab" data-tab="info">Thông tin</button>
        <button class="tab" data-tab="seasons">Các mùa phim</button>
        <button class="tab" data-tab="producers">Nhà sản xuất</button>
        <button class="tab" data-tab="recommend">Đề xuất</button>
        <button class="tab" data-tab="comments">Đánh giá</button>
      </div>

      <!-- TAB 1: Diễn viên -->
      <div class="tab-content active" id="actors">
        <div class="grid-layout actor-grid">
          <h3>Diễn viên</h3>
          <div class="circle-actor"></div>
          <a class="view-more">Xem thêm ⮟</a>
        </div>
      </div>

      <!-- TAB 2: Thông tin -->
      <div class="tab-content" id="info">
        <div class="grid-layout info-grid">
          <h3>Thông tin phim</h3>
          <div class="movie-info">
            <div class="movie-info-title">Số mùa:</div>
            <div class="movie-info-value">-</div>
          </div>
          <div class="movie-info">
            <div class="movie-info-title">Tổng số tập:</div>
            <div class="movie-info-value">-</div>
          </div>
          <div class="movie-info">
            <div class="movie-info-title">Quốc gia:</div>
            <div class="movie-info-value">-</div>
          </div>
          <div class="movie-info">
            <div class="movie-info-title">Trạng thái:</div>
            <div class="movie-info-value">-</div>
          </div>
          <div class="movie-info">
            <div class="movie-info-title">Ngày phát sóng đầu:</div>
            <div class="movie-info-value">-</div>
          </div>
        </div>
      </div>

      <!-- TAB 3: Các mùa phim -->
      <div class="tab-content" id="seasons">
        <div class="grid-layout season-grid">
          <h3>Các mùa phim</h3>
          <div id="season-container" class="season-list">
            <div class="season-box">
              <img src="https://placehold.co/150x220?text=Poster" alt="Mùa 1" />
              <div class="season-info">
                <h4>Mùa 1</h4>
                <p class="imdb-badge">IMDb <span>6.6</span></p>
                <p><strong>Giới thiệu:</strong></p>
                <p><strong>Ngày phát sóng:</strong> 2025-09-25</p>
                <p><strong>Số tập:</strong> 8</p>
                <p><strong>Giới thiệu:</strong></p>
              </div>
            </div>
          </div>
          <a class="view-more" id="season-view-more">Xem thêm ⮟</a>
        </div>
      </div>

      <!-- TAB 4: Nhà sản xuất -->
      <div class="tab-content" id="producers">
        <div class="grid-layout producer-grid">
          <h3>Nhà sản xuất</h3>
          <div class="producer-info"></div>
        </div>
      </div>

      <!-- TAB 5: Đánh giá -->
      <div class="tab-content" id="comments">
        <div class="grid-layout comment-section">
          <h3>Đánh giá của khán giả</h3>

          <!-- Thống kê -->
          <div class="comments-stats">
            <div class="stat-item">
              Đánh giá trung bình: <span id="avg-rating">0</span>/5
            </div>
            <div class="stat-item">
              Tổng số đánh giá: <span id="total-comments">0</span>
            </div>
          </div>

          <!-- Form nhập comment -->
          <div class="comment-form">
            <div class="rating-input">
              <label>Đánh giá của bạn:</label>
              <div class="star-rating" id="star-rating">
                <i class="fas fa-star" data-rating="1"></i>
                <i class="fas fa-star" data-rating="2"></i>
                <i class="fas fa-star" data-rating="3"></i>
                <i class="fas fa-star" data-rating="4"></i>
                <i class="fas fa-star" data-rating="5"></i>
              </div>
            </div>
            <textarea
              id="comment-text"
              placeholder="Chia sẻ cảm nhận của bạn về bộ phim..."
            ></textarea>
            <button id="submit-comment">Gửi đánh giá</button>
          </div>

          <!-- Danh sách comments -->
          <div class="comments-list" id="comments-list">
            <div class="no-comments">
              Chưa có đánh giá nào. Hãy là người đầu tiên!
            </div>
          </div>
        </div>
      </div>

      <!-- TAB 6: Đề xuất -->
      <div class="tab-content" id="recommend">
        <div class="grid-layout recommend-grid">
          <h3>Đề xuất</h3>
          <div id="recommendations" class="movie-list">
            <!-- Render các phim gợi ý -->
          </div>
        </div>
      </div>
    </section>

    <div id="trailer-modal" class="trailer-modal">
      <div class="trailer-content">
        <span id="close-trailer" class="close">&times;</span>
        <iframe
          id="trailer-frame"
          width="100%"
          height="500"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </div>
    <!-- start-footer -->
    <div id="footer"></div>

    <script type="module">
      fetch("../components/Footer.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("footer").innerHTML = html;
        })
        .catch((error) => {
          console.error("Fetch footer failed:", error);
        });
    </script>
    <!-- end-footer -->

    <script type="module" src="../../js/TvShowDetail.js"></script>
    <script type="module" src="../../js/Trailer.js"></script>
    <script type="module" src="../../js/Comment.js"></script>
  </body>
</html>
