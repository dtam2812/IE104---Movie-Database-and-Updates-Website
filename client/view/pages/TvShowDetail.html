<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIT FILM</title>
    <link rel="icon" type="image/png" href="../../../public/assets/image/logo-web-black.png">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="../../style/HeaderAndFooter.css">
    <link rel="stylesheet" href="../../style/TvShowDetail.css">
    <link rel="stylesheet" href="../../style/MovieCard.css">
    <link rel="stylesheet" href="../../Style/Trailer.css">
    <link rel="stylesheet" href="../../Style/CastCard.css">
    <link rel="stylesheet" href="../../Services/reset.css">
    <link rel="stylesheet" href="../../Style/SearchBar.css">
  </head>

  <body>
    <!-- Header -->
    <div id="header"></div>

    <script type="module">
      import { headerjs } from "../../js/Header.js";
      import { searchBar } from "../../js/SearchBar.js";

      fetch("../components/Header.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("header").innerHTML = html;
          headerjs();
          return fetch("../components/SearchBar.html");
        })
        .then((res) => res.text())
        .then((searchHTML) => {
          document.querySelector(".search-box").innerHTML = searchHTML;
          searchBar();
        })
        .catch((error) => console.error("Fetch header/search failed:", error));
    </script>

    <!-- Movie Detail Banner -->
    <section class="detail">
      <div class="detail__container">
        <div class="detail__wrap">
          <div class="detail__background"></div>
          <div class="detail__content">
            <div class="detail__poster">
              <img
                alt=""
                loading="lazy"
                src="https://placehold.co/500x750/1a1a2e/0891b2?text=No+Postergit"
              >
            </div>

            <div class="detail__info">
              <div class="detail__title">
                <h3>Steve</h3>
              </div>

              <div class="detail__review">
                <div class="detail__score">
                  <p>IMDb <span>6.6</span></p>
                </div>
                <div class="detail__age">
                  <span><strong>T18</strong></span>
                </div>
              </div>

              <div class="detail__genres">
                <span>Chính kịch</span>
                <span>Hài</span>
                <span>Chuyển thể</span>
              </div>

              <div class="detail__actions">
                <a
                  id="trailer-btn"
                  class="detail__btn detail__btn--play"
                  href="#"
                >
                  <i class="fa-solid fa-play"></i>
                  <span><strong>Trailer</strong></span>
                </a>
                <a
                  class="detail__btn detail__btn--like favorite-btn"
                  href="#"
                  aria-label="Yêu thích"
                >
                  <svg
                    width="17"
                    height="17"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                  >
                    <path
                      d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                    />
                  </svg>
                </a>
              </div>

              <div class="detail__overview">
                <span data-i18n="detail.intro">Giới thiệu:</span><br>
                Trong một ngày căng thẳng, vị hiệu trưởng tận tâm của một trường
                cải tạo cơ hội cuối nỗ lực đưa các học sinh của mình vào khuôn
                khổ trong khi đối mặt với áp lực riêng.
              </div>

              <div class="detail__director">
                <p>
                  <span data-i18n="tvshow.creator">Đạo diễn:</span> Tim
                  Mielants, Daire Glynn
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tabs Section -->
    <section class="tabs">
      <!-- Tab Navigation -->
      <div class="tabs__nav">
        <button
          class="tabs__btn tabs__btn--active"
          data-tab="actors"
          data-i18n="detail.tab.actors"
        >
          Diễn viên
        </button>
        <button class="tabs__btn" data-tab="info" data-i18n="tvshow.tab.info">
          Thông tin
        </button>
        <button
          class="tabs__btn"
          data-tab="seasons"
          data-i18n="tvshow.tab.seasons"
        >
          Các mùa phim
        </button>
        <button
          class="tabs__btn"
          data-tab="producers"
          data-i18n="tvshow.tab.producers"
        >
          Nhà sản xuất
        </button>
        <button
          class="tabs__btn"
          data-tab="recommend"
          data-i18n="detail.tab.recommend"
        >
          Đề xuất
        </button>
        <button
          class="tabs__btn"
          data-tab="comments"
          data-i18n="detail.tab.comments"
        >
          Đánh giá
        </button>
      </div>

      <!-- Tab 1: Actors -->
      <div class="tabs__content tabs__content--active" id="actors">
        <div class="tab-panel tab-panel--actors">
          <h3 class="tab-panel__title" data-i18n="detail.section.actors">
            Diễn viên
          </h3>
          <div class="actors"></div>
          <a class="tab-panel__more" data-i18n="detail.viewMore">Xem thêm</a>
        </div>
      </div>

      <!-- Tab 2: Information -->
      <div class="tabs__content" id="info">
        <div class="tab-panel tab-panel--info">
          <h3 class="tab-panel__title" data-i18n="tvshow.infoTitle">
            Thông tin phim
          </h3>
          <div class="info-item">
            <div class="info-item__label">Số mùa:</div>
            <div class="info-item__value">-</div>
          </div>
          <div class="info-item">
            <div class="info-item__label">Tổng số tập:</div>
            <div class="info-item__value">-</div>
          </div>
          <div class="info-item">
            <div class="info-item__label">Quốc gia:</div>
            <div class="info-item__value">-</div>
          </div>
          <div class="info-item">
            <div class="info-item__label">Trạng thái:</div>
            <div class="info-item__value">-</div>
          </div>
          <div class="info-item">
            <div class="info-item__label">Ngày phát sóng đầu:</div>
            <div class="info-item__value">-</div>
          </div>
        </div>
      </div>

      <!-- Tab 3: Seasons -->
      <div class="tabs__content" id="seasons">
        <div class="tab-panel tab-panel--seasons">
          <h3 class="tab-panel__title" data-i18n="tvshow.tab.seasons">
            Các mùa phim
          </h3>
          <div id="season-container" class="seasons">
            <div class="season">
              <img
                class="season__poster"
                src="https://placehold.co/150x220?text=Poster"
                alt="Mùa 1"
              >
              <div class="season__info">
                <h4 class="season__name">Mùa 1</h4>
                <p class="season__badge">IMDb <span>6.6</span></p>
                <p><strong>Giới thiệu:</strong></p>
                <p><strong>Ngày phát sóng:</strong> 2025-09-25</p>
                <p><strong>Số tập:</strong> 8</p>
                <p><strong>Giới thiệu:</strong></p>
              </div>
            </div>
          </div>
          <a
            class="tab-panel__more"
            id="season-view-more"
            data-i18n="detail.viewMore"
            >Xem thêm</a
          >
        </div>
      </div>

      <!-- Tab 4: Producers -->
      <div class="tabs__content" id="producers">
        <div class="tab-panel tab-panel--producers">
          <h3 class="tab-panel__title" data-i18n="tvshow.tab.producers">
            Nhà sản xuất
          </h3>
          <div class="producers"></div>
        </div>
      </div>

      <!-- Tab 5: Comments -->
      <div class="tabs__content" id="comments">
        <div class="tab-panel tab-panel--comments">
          <h3 class="tab-panel__title" data-i18n="detail.section.comments">
            Đánh giá của khán giả
          </h3>

          <!-- Stats -->
          <div class="comment-stats">
            <div class="comment-stats__item">
              <span data-i18n="detail.avgRating">Đánh giá trung bình:</span>
              <span id="avg-rating">0</span>/5
            </div>
            <div class="comment-stats__item">
              <span data-i18n="detail.totalComments">Tổng số đánh giá:</span>
              <span id="total-comments">0</span>
            </div>
          </div>

          <!-- Form -->
          <div class="comment-form">
            <div class="comment-form__rating">
              <label data-i18n="detail.yourRating">Đánh giá của bạn:</label>
              <div class="star-rating" id="star-rating">
                <i class="fas fa-star" data-rating="1"></i>
                <i class="fas fa-star" data-rating="2"></i>
                <i class="fas fa-star" data-rating="3"></i>
                <i class="fas fa-star" data-rating="4"></i>
                <i class="fas fa-star" data-rating="5"></i>
              </div>
            </div>
            <textarea
              class="comment-form__textarea"
              id="comment-text"
              placeholder="Chia sẻ cảm nhận của bạn về bộ phim..."
              data-i18n-placeholder="detail.commentPlaceholder"
            ></textarea>
            <button
              class="comment-form__submit"
              id="submit-comment"
              data-i18n="detail.submit"
            >
              Gửi đánh giá
            </button>
          </div>

          <!-- Comments List -->
          <div class="comments-list" id="comments-list">
            <div class="comments-list__empty" data-i18n="detail.noComments">
              Chưa có đánh giá nào. Hãy là người đầu tiên!
            </div>
          </div>
        </div>
      </div>

      <!-- Tab 6: Recommendations -->
      <div class="tabs__content" id="recommend">
        <div class="tab-panel tab-panel--recommend">
          <h3 class="tab-panel__title" data-i18n="detail.section.recommend">
            Đề xuất
          </h3>
          <div id="recommendations" class="recommendations"></div>
        </div>
      </div>
    </section>

    <!-- Trailer Modal -->
    <div id="trailer-modal" class="trailer-modal">
      <div class="trailer-modal__content">
        <span id="close-trailer" class="trailer-modal__close">&times;</span>
        <div id="trailer-container"></div>
      </div>
    </div>

    <!-- Footer -->
    <footer id="footer"></footer>

    <script type="module">
      fetch("../components/Footer.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("footer").innerHTML = html;
        })
        .catch((error) => console.error("Fetch footer failed:", error));
    </script>

    <script type="module" src="../../js/TvShowDetail.js"></script>
    <script type="module" src="../../js/Trailer.js"></script>
    <script type="module" src="../../js/Comment.js"></script>
    <!-- Import FavoritesManager -->
</body>
</html>
