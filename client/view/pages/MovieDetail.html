<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UIT FILM</title>
    <link
      rel="icon"
      type="image/png"
      href="../../../public/assets/image/logo-web-black.png"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../../Style/HeaderAndFooter.css" />
    <link rel="stylesheet" href="../../Style/MovieDetail.css" />
    <link rel="stylesheet" href="../../Style/MovieCard.css" />
    <link rel="stylesheet" href="../../Style/SearchBar.css" />
    <link rel="stylesheet" href="../../Style/Trailer.css" />
    <link rel="stylesheet" href="../../Style/CastCard.css" />
    <link rel="stylesheet" href="../../Services/reset.css" />
  </head>
  <body>
    <!-- start-header -->
    <div id="header"></div>

    <script type="module">
      import { headerjs } from "../../js/Header.js";
      import { searchBar } from "../../js/SearchBar.js";

      fetch("../components/Header.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("header").innerHTML = html;
          headerjs();
          return fetch("../components/SearchBar.html");
        })
        .then((res) => res.text())
        .then((searchHTML) => {
          document.querySelector(".search-box").innerHTML = searchHTML;
          searchBar();
        })
        .catch((error) => console.error("Fetch header/search failed:", error));
    </script>
    <!-- end-header -->

    <!--start-movie-banner -->
    <section class="movie-banner">
      <div class="movie-banner__container">
        <div class="movie-banner__wrap">
          <div class="movie-banner__background"></div>
          <div class="movie-banner__content">
            <div class="movie-banner__poster">
              <img
                alt=""
                loading="lazy"
                src="https://static.nutscdn.com/vimg/300-0/ef826a2c732ac7c76a322f004111e18d.webp"
              />
            </div>
            <div class="movie-banner__info">
              <div class="movie-banner__title">
                <h3>Steve</h3>
              </div>
              <div class="movie-banner__meta">
                <div class="movie-banner__rating">
                  <p>IMDb <span>6.6</span></p>
                </div>
                <div class="movie-banner__age">
                  <span><strong>T18</strong></span>
                </div>
              </div>
              <div class="movie-banner__genres">
                <span>Chính kịch</span>
                <span>Hài</span>
                <span>Chuyển thể</span>
              </div>
              <div class="movie-banner__actions">
                <a
                  id="trailer-btn"
                  class="movie-banner__button movie-banner__button--play"
                  href="#"
                >
                  <i class="fa-solid fa-play"></i>
                  <span><strong>Trailer</strong></span>
                </a>
                <a
                  class="movie-banner__button movie-banner__button--like"
                  href="#"
                >
                  <i class="fa-solid fa-heart"></i>
                </a>
              </div>
              <div class="movie-banner__overview">
                <span>Giới thiệu:</span><br />
                Trong một ngày căng thẳng, vị hiệu trưởng tận tâm của một trường
                cải tạo cơ hội cuối nỗ lực đưa các học sinh của mình vào khuôn
                khổ trong khi đối mặt với áp lực riêng.
              </div>
              <div class="movie-banner__director">
                <p><span>Đạo diễn:</span> Tim Mielants, Daire Glynn</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- end-movie-banner -->

    <section class="movie-tabs-section">
      <!-- Thanh Tabs -->
      <div class="movie-tabs">
        <button
          class="movie-tabs__item movie-tabs__item--active"
          data-tab="actors"
        >
          Diễn viên
        </button>
        <button class="movie-tabs__item" data-tab="info">Thông tin</button>
        <button class="movie-tabs__item" data-tab="recommend">Đề xuất</button>
        <button class="movie-tabs__item" data-tab="comments">Đánh giá</button>
      </div>

      <!-- TAB 1: Diễn viên -->
      <div class="movie-tabs__content movie-tabs__content--active" id="actors">
        <div class="tab-panel tab-panel--actors">
          <h3>Diễn viên</h3>
          <div class="actors-grid"></div>
          <a class="tab-panel__view-more">Xem thêm ⮟</a>
        </div>
      </div>

      <!-- TAB 2: Thông tin -->
      <div class="movie-tabs__content" id="info">
        <div class="tab-panel tab-panel--info">
          <h3>Thông tin phim</h3>
          <div class="movie-info">
            <div class="movie-info__label">Thời lượng:</div>
            <div class="movie-info__value">1h 32m</div>
          </div>
          <div class="movie-info">
            <div class="movie-info__label">Quốc gia:</div>
            <div class="movie-info__value">Ai-len</div>
          </div>
          <div class="movie-info">
            <div class="movie-info__label">Nhà sản xuất:</div>
            <div class="movie-info__value">Big Things Films</div>
          </div>
          <div class="movie-info">
            <div class="movie-info__label">Ngân sách:</div>
            <div class="movie-info__value">$100,000</div>
          </div>
          <div class="movie-info">
            <div class="movie-info__label">Doanh thu:</div>
            <div class="movie-info__value">$100,000</div>
          </div>
          <div class="movie-info">
            <div class="movie-info__label">Trạng thái:</div>
            <div class="movie-info__value">Đang phát hành</div>
          </div>
        </div>
      </div>

      <!-- TAB 3: Đánh giá -->
      <div class="movie-tabs__content" id="comments">
        <div class="tab-panel tab-panel--comments">
          <h3>Đánh giá của khán giả</h3>

          <!-- Thống kê -->
          <div class="comments-stats">
            <div class="comments-stats__item">
              Đánh giá trung bình: <span id="avg-rating">0</span>/5
            </div>
            <div class="comments-stats__item">
              Tổng số đánh giá: <span id="total-comments">0</span>
            </div>
          </div>

          <!-- Form nhập comment -->
          <div class="comment-form">
            <div class="comment-form__rating">
              <label>Đánh giá của bạn:</label>
              <div class="star-rating" id="star-rating">
                <i class="fas fa-star" data-rating="1"></i>
                <i class="fas fa-star" data-rating="2"></i>
                <i class="fas fa-star" data-rating="3"></i>
                <i class="fas fa-star" data-rating="4"></i>
                <i class="fas fa-star" data-rating="5"></i>
              </div>
            </div>
            <textarea
              id="comment-text"
              class="comment-form__textarea"
              placeholder="Chia sẻ cảm nhận của bạn về bộ phim..."
            ></textarea>
            <button id="submit-comment" class="comment-form__submit">
              Gửi đánh giá
            </button>
          </div>

          <!-- Danh sách comments -->
          <div class="comments-list" id="comments-list">
            <div class="comments-list__empty">
              Chưa có đánh giá nào. Hãy là người đầu tiên!
            </div>
          </div>
        </div>
      </div>

      <!-- TAB 4: Đề xuất -->
      <div class="movie-tabs__content" id="recommend">
        <div class="tab-panel tab-panel--recommend">
          <h3>Đề xuất</h3>
          <div id="recommendations" class="recommendations-grid">
            <!-- Render các phim gợi ý -->
          </div>
        </div>
      </div>
    </section>

    <div id="trailer-modal" class="trailer-modal">
  <div class="trailer-modal__content">
    <span id="close-trailer" class="trailer-modal__close">&times;</span>
    <div id="trailer-container"></div>
  </div>
</div>

    <!-- start-footer -->
    <div id="footer"></div>

    <script type="module">
      fetch("../components/Footer.html")
        .then((res) => res.text())
        .then((html) => {
          document.getElementById("footer").innerHTML = html;
        })
        .catch((error) => {
          console.error("Fetch footer failed:", error);
        });
    </script>
    <!-- end-footer -->
    <script type="module" src="../../js/MovieDetail.js"></script>
    <script type="module" src="../../js/Trailer.js"></script>
    <script type="module" src="../../js/Comment.js"></script>
  </body>
</html>
